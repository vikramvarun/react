CREATE TABLE `bank_data` (
  `bank_data_id` bigint(20) NOT NULL AUTO_INCREMENT,
  `customer_id` bigint(20) DEFAULT NULL,
  `client_transaction_id` varchar(50) DEFAULT NULL,
  `perfios_transaction_id` varchar(50) DEFAULT NULL,
  `perfios_status` varchar(15) DEFAULT NULL,
  `resp_file_name` varchar(100) DEFAULT NULL,
  `report_file_name` varchar(100) DEFAULT NULL,
  `kb_status` varchar(30) DEFAULT NULL,
  `product_type` int(11) DEFAULT NULL,
  `request_date` date DEFAULT NULL,
  `type` varchar(2) DEFAULT 'sa',
  `reparse` tinyint(4) DEFAULT '0',
  `json_reponse` text,
  PRIMARY KEY (`bank_data_id`)
) ENGINE=InnoDB AUTO_INCREMENT=806 DEFAULT CHARSET=latin1


CREATE TABLE `bank_data_accounts_info` (
  `bank_data_accounts_info_id` bigint(20) NOT NULL AUTO_INCREMENT,
  `bank_data_id` bigint(20) NOT NULL,
  `bank_data_customer_account_info_id` bigint(20) NOT NULL,
  `perfios_transaction_id` varchar(50) DEFAULT NULL,
  `inst_id` varchar(10) DEFAULT NULL,
  `account_type` varchar(100) DEFAULT NULL,
  `account_no` varchar(50) DEFAULT NULL,
  `bank` varchar(70) DEFAULT NULL,
  `ifsc_code` varchar(11) DEFAULT NULL,
  `location` varchar(255) DEFAULT NULL,
  `micr_code` varchar(11) DEFAULT NULL,
  `balance` float DEFAULT '0',
  PRIMARY KEY (`bank_data_accounts_info_id`),
  KEY `bank_data_accounts_info_ibfk_1` (`bank_data_id`),
  KEY `bank_data_accounts_info_ibfk_2` (`bank_data_customer_account_info_id`),
  CONSTRAINT `bank_data_accounts_info_ibfk_1` FOREIGN KEY (`bank_data_id`) REFERENCES `bank_data` (`bank_data_id`),
  CONSTRAINT `bank_data_accounts_info_ibfk_2` FOREIGN KEY (`bank_data_customer_account_info_id`) REFERENCES `bank_data_customer_account_info` (`bank_data_customer_account_info_id`)
) ENGINE=InnoDB AUTO_INCREMENT=734 DEFAULT CHARSET=latin1


CREATE TABLE `bank_data_customer_account_info` (
  `bank_data_customer_account_info_id` bigint(20) NOT NULL AUTO_INCREMENT,
  `bank_data_id` bigint(20) NOT NULL,
  `perfios_transaction_id` varchar(50) DEFAULT NULL,
  `start_date` date DEFAULT NULL,
  `end_date` date DEFAULT NULL,
  `name` varchar(100) DEFAULT NULL,
  `mobile` varchar(20) DEFAULT NULL,
  `landline` varchar(20) DEFAULT NULL,
  `address` varchar(500) DEFAULT NULL,
  `duration_in_months` int(11) DEFAULT NULL,
  `source_of_data` varchar(30) DEFAULT NULL,
  `email` varchar(50) DEFAULT NULL,
  `pan` char(10) DEFAULT NULL,
  PRIMARY KEY (`bank_data_customer_account_info_id`),
  KEY `bank_data_customer_account_info_ibfk_1` (`bank_data_id`),
  CONSTRAINT `bank_data_customer_account_info_ibfk_1` FOREIGN KEY (`bank_data_id`) REFERENCES `bank_data` (`bank_data_id`)
) ENGINE=InnoDB AUTO_INCREMENT=606 DEFAULT CHARSET=latin1


CREATE TABLE `bank_data_form26as_non_tds_details` (
  `non_tds_pid` bigint(20) NOT NULL AUTO_INCREMENT,
  `form_26_pid` bigint(20) DEFAULT NULL,
  `bank_data_id` bigint(20) DEFAULT NULL,
  `assessment_year` varchar(15) DEFAULT NULL,
  `financial_year` varchar(15) DEFAULT NULL,
  `tax` int(11) DEFAULT NULL,
  `non_tds_date` date DEFAULT NULL,
  `majorHead` varchar(20) DEFAULT NULL,
  `minorHead` varchar(20) DEFAULT NULL,
  PRIMARY KEY (`non_tds_pid`)
) ENGINE=InnoDB AUTO_INCREMENT=52 DEFAULT CHARSET=utf8


CREATE TABLE `bank_data_form26as_personal_details` (
  `form_26_pid` bigint(20) NOT NULL AUTO_INCREMENT,
  `bank_data_id` bigint(20) DEFAULT NULL,
  `address` varchar(250) DEFAULT NULL,
  `dob` date DEFAULT NULL,
  `name` varchar(100) DEFAULT NULL,
  `pan` varchar(10) DEFAULT NULL,
  `panStatus` varchar(20) DEFAULT NULL,
  PRIMARY KEY (`form_26_pid`),
  KEY `bank_data_id` (`bank_data_id`),
  CONSTRAINT `bank_data_form26as_personal_details_ibfk_1` FOREIGN KEY (`bank_data_id`) REFERENCES `bank_data` (`bank_data_id`)
) ENGINE=InnoDB AUTO_INCREMENT=230 DEFAULT CHARSET=latin1


CREATE TABLE `bank_data_form26as_tds_details` (
  `tds_pid` bigint(20) NOT NULL AUTO_INCREMENT,
  `form_26_pid` bigint(20) DEFAULT NULL,
  `bank_data_id` bigint(20) DEFAULT NULL,
  `assessment_year` varchar(20) DEFAULT NULL,
  `financial_year` varchar(20) DEFAULT NULL,
  `amount` int(11) DEFAULT NULL,
  `tds_date` date DEFAULT NULL,
  `deductor` varchar(200) DEFAULT NULL,
  `section` varchar(50) DEFAULT NULL,
  `tan` varchar(10) DEFAULT NULL,
  `tds` varchar(50) DEFAULT NULL,
  PRIMARY KEY (`tds_pid`),
  KEY `form_26_pid` (`form_26_pid`),
  KEY `bank_data_id` (`bank_data_id`),
  CONSTRAINT `bank_data_form26as_tds_details_ibfk_1` FOREIGN KEY (`form_26_pid`) REFERENCES `bank_data_form26as_personal_details` (`form_26_pid`),
  CONSTRAINT `bank_data_form26as_tds_details_ibfk_2` FOREIGN KEY (`bank_data_id`) REFERENCES `bank_data` (`bank_data_id`)
) ENGINE=InnoDB AUTO_INCREMENT=1676 DEFAULT CHARSET=latin1


CREATE TABLE `bank_data_transactions_info` (
  `bank_data_transactions_info_id` bigint(20) NOT NULL AUTO_INCREMENT,
  `bank_data_id` bigint(20) NOT NULL,
  `bank_data_accounts_info_id` bigint(20) NOT NULL,
  `category` varchar(250) DEFAULT NULL,
  `chqno` varchar(50) DEFAULT NULL,
  `amount` float DEFAULT NULL,
  `narration` varchar(500) DEFAULT NULL,
  `transaction_date` date DEFAULT NULL,
  `balance` float DEFAULT NULL,
  PRIMARY KEY (`bank_data_transactions_info_id`),
  KEY `bank_data_transactions_summary_ibfk_1` (`bank_data_id`),
  KEY `bank_data_transactions_summary_ibfk_2` (`bank_data_accounts_info_id`),
  CONSTRAINT `bank_data_transactions_info_ibfk_1` FOREIGN KEY (`bank_data_id`) REFERENCES `bank_data` (`bank_data_id`),
  CONSTRAINT `bank_data_transactions_info_ibfk_2` FOREIGN KEY (`bank_data_accounts_info_id`) REFERENCES `bank_data_accounts_info` (`bank_data_accounts_info_id`)
) ENGINE=InnoDB AUTO_INCREMENT=624770 DEFAULT CHARSET=latin1


CREATE TABLE `bank_data_transactions_summary` (
  `bank_data_transactions_summary_id` bigint(20) NOT NULL AUTO_INCREMENT,
  `bank_data_id` bigint(20) NOT NULL,
  `bank_data_accounts_info_id` bigint(20) NOT NULL,
  `total_txn_count` bigint(20) NOT NULL,
  `cum_txn_value` float DEFAULT NULL,
  `avg_txn_value` float DEFAULT NULL,
  `avg_txn_count` float DEFAULT NULL,
  `avg_txn_value_last_month` float DEFAULT NULL,
  `tot_txn_count_last_month` float DEFAULT NULL,
  `earliest_balance` bigint(20) DEFAULT NULL,
  `latest_balance` bigint(20) DEFAULT NULL,
  `avg_eom_balance` float DEFAULT NULL,
  `cash_flow` float DEFAULT NULL,
  `cash_flow_last_month` float DEFAULT NULL,
  `avg_txn_value_per_txn` float DEFAULT NULL,
  `avg_txn_value_per_txn_last_month` float DEFAULT NULL,
  PRIMARY KEY (`bank_data_transactions_summary_id`),
  KEY `bank_data_transactions_summary_ibfk_1` (`bank_data_id`),
  KEY `bank_data_transactions_summary_ibfk_2` (`bank_data_accounts_info_id`),
  CONSTRAINT `bank_data_transactions_summary_ibfk_1` FOREIGN KEY (`bank_data_id`) REFERENCES `bank_data` (`bank_data_id`),
  CONSTRAINT `bank_data_transactions_summary_ibfk_2` FOREIGN KEY (`bank_data_accounts_info_id`) REFERENCES `bank_data_accounts_info` (`bank_data_accounts_info_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1


CREATE TABLE `bank_data_txn_status` (
  `bank_data_txn_status_id` bigint(20) NOT NULL AUTO_INCREMENT,
  `bank_data_id` bigint(20) NOT NULL,
  `perfios_transaction_id` varchar(50) DEFAULT NULL,
  `processing` varchar(30) DEFAULT NULL,
  `files` varchar(30) DEFAULT NULL,
  `status` varchar(30) DEFAULT NULL,
  `error_code` varchar(100) DEFAULT NULL,
  `reason` varchar(250) DEFAULT NULL,
  PRIMARY KEY (`bank_data_txn_status_id`),
  KEY `bank_data_txn_status_ibfk_1` (`bank_data_id`),
  CONSTRAINT `bank_data_txn_status_ibfk_1` FOREIGN KEY (`bank_data_id`) REFERENCES `bank_data` (`bank_data_id`)
) ENGINE=InnoDB AUTO_INCREMENT=613 DEFAULT CHARSET=latin1
